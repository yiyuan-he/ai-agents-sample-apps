{"version":3,"file":"step-functions.js","sourceRoot":"","sources":["../../../../../src/patches/aws/services/step-functions.ts"],"names":[],"mappings":";AAAA,qEAAqE;AACrE,sCAAsC;;;AAEtC,4CAA0D;AAE1D,oEAAiE;AAGjE,MAAa,6BAA6B;IACxC,kBAAkB,CAAC,OAA0B,EAAE,OAAoC;;QACjF,MAAM,eAAe,GAAG,MAAA,OAAO,CAAC,YAAY,0CAAE,eAAe,CAAC;QAC9D,MAAM,WAAW,GAAG,MAAA,OAAO,CAAC,YAAY,0CAAE,WAAW,CAAC;QAEtD,MAAM,QAAQ,GAAa,cAAQ,CAAC,MAAM,CAAC;QAC3C,IAAI,QAA4B,CAAC;QAEjC,MAAM,cAAc,GAAe,EAAE,CAAC;QAEtC,IAAI,eAAe,EAAE;YACnB,cAAc,CAAC,uCAAkB,CAAC,kCAAkC,CAAC,GAAG,eAAe,CAAC;SACzF;QAED,IAAI,WAAW,EAAE;YACf,cAAc,CAAC,uCAAkB,CAAC,8BAA8B,CAAC,GAAG,WAAW,CAAC;SACjF;QAED,MAAM,UAAU,GAAG,KAAK,CAAC;QAEzB,OAAO;YACL,UAAU;YACV,cAAc;YACd,QAAQ;YACR,QAAQ;SACT,CAAC;IACJ,CAAC;CACF;AA3BD,sEA2BC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Attributes, SpanKind } from '@opentelemetry/api';\nimport { AwsSdkInstrumentationConfig, NormalizedRequest } from '@opentelemetry/instrumentation-aws-sdk';\nimport { AWS_ATTRIBUTE_KEYS } from '../../../aws-attribute-keys';\nimport { RequestMetadata, ServiceExtension } from '../../../third-party/otel/aws/services/ServiceExtension';\n\nexport class StepFunctionsServiceExtension implements ServiceExtension {\n  requestPreSpanHook(request: NormalizedRequest, _config: AwsSdkInstrumentationConfig): RequestMetadata {\n    const stateMachineArn = request.commandInput?.stateMachineArn;\n    const activityArn = request.commandInput?.activityArn;\n\n    const spanKind: SpanKind = SpanKind.CLIENT;\n    let spanName: string | undefined;\n\n    const spanAttributes: Attributes = {};\n\n    if (stateMachineArn) {\n      spanAttributes[AWS_ATTRIBUTE_KEYS.AWS_STEPFUNCTIONS_STATEMACHINE_ARN] = stateMachineArn;\n    }\n\n    if (activityArn) {\n      spanAttributes[AWS_ATTRIBUTE_KEYS.AWS_STEPFUNCTIONS_ACTIVITY_ARN] = activityArn;\n    }\n\n    const isIncoming = false;\n\n    return {\n      isIncoming,\n      spanAttributes,\n      spanKind,\n      spanName,\n    };\n  }\n}\n"]}